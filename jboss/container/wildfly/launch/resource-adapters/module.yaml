schema_version: 1
name: jboss.container.wildfly.launch.resource-adapters
version: '1.0'
description: Installs the $JBOSS_HOME/bin/launch files to adjust the resource-adapters config

execute:
- script: configure.sh
  user: '185'

envs:
  - name: "RESOURCE_ADAPTERS"
    description: "Comma-separated list of resource adapter env variable prefixes. These prefixes are then appended to all env variables for that resource adapter."
    example: "AMQ_RA,TEST_RA"
  - name: "{PREFIX}_ID"
    description: "The identifier of the resource adapter as specified in the server configuration file."
    example: "activemq-rar"
  - name: "{PREFIX}_ARCHIVE"
    description: "The resource adapter archive."
    example: "activemq-rar.rar"
  - name: "{PREFIX}_MODULE_SLOT"
    description: "The slot subdirectory, which contains the module.xml configuration file and any required JAR files. Defaults to 'main'"
    example: "slot-one"
  - name: "{PREFIX}_MODULE_ID"
    description: "The JBoss Module ID where the object factory Java class can be loaded from."
    example: "org.jboss.resource-adapter.file"
  - name: "{PREFIX}_CONNECTION_CLASS"
    description: "The fully qualified class name of a managed connection factory or admin object."
    example: "org.apache.activemq.ra.ActiveMQManagedConnectionFactory"
  - name: "{PREFIX}_CONNECTION_JNDI"
    description: "The JNDI name for the connection factory."
    example: "java:/ConnectionFactory"
  - name: "{PREFIX}_PROPERTY_{property_name}"
    description: "These variables are used to add config-property entries to the resource adapter. The {property_name} defines the name of the property to add and the value will be the value configured on this environment variable."
    example: "For example, if your resource adapter with prefix 'TEST_RA' accepts a config-property named AllowParentPaths and you want to set it as 'true', then your environment variable will be TEST_RA_PROPERTY_AllowParentPaths=true "
  - name: "{PREFIX}_POOL_MAX_SIZE"
    description: "The maximum number of connections for a pool. No more connections will be created in each sub-pool."
    example: "5"
  - name: "{PREFIX}_POOL_MIN_SIZE"
    description: "The minimum number of connections for a pool."
    example: "1"
  - name: "{PREFIX}_POOL_PREFILL"
    description: "Specifies if the pool should be prefilled. Changing this value requires a server restart."
    example: "false"
  - name: "{PREFIX}_POOL_FLUSH_STRATEGY"
    description: "How the pool should be flushed in case of an error. Valid values are: FailingConnectionOnly (default), IdleConnections, and EntirePool."
    example: "EntirePool"
  - name: "{PREFIX}_POOL_IS_SAME_RM_OVERRIDE"
    description: "Using this attribute, you can unconditionally set whether javax.transaction.xa.XAResource.isSameRM(XAResource) returns true or false."
    example: "true"
  - name: "{PREFIX}_RECOVERY_USERNAME"
    description: "The user name used for recovery."
    example: "jboss"
  - name: "{PREFIX}_RECOVERY_PASSWORD"
    description: "The password used for recovery."
    example: "P@ssw0rd"
  - name: "{PREFIX}_POOL_XA"
    description: "Boolean value to define if a xa-pool will be used to configure the resource adapter connection-definitions instead of a non-xa pool. By default non-xa pool is used"
    example: "true"
  - name: "{PREFIX}_TRACKING"
    description: "Boolean value to define if the resource adapter track connection handles across transaction boundaries."
    example: "true"
  - name: "{PREFIX}_TRANSACTION_SUPPORT"
    description: "Specifies the transaction support level of the resource adapter. Allowed values 'NoTransaction','LocalTransaction' or 'XATransaction'"
    example: "XATransaction"
  - name: "{PREFIX}_ADMIN_OBJECTS"
    description: "Comma-separated list of admin object env variable prefixes. These prefixes are then appended to all env variables related to admin objects."
    example: "queue,topic"
  - name: "${PREFIX}_ADMIN_OBJECT_${ADMIN_OBJECT_PREFIX}_CLASS_NAME"
    description: "Specifies the fully qualified class name of an administration object."
    example: "org.apache.activemq.command.ActiveMQQueue"
  - name: "${PREFIX}_ADMIN_OBJECT_${ADMIN_OBJECT_PREFIX}_PHYSICAL_NAME"
    description: "Name of the management resource created for this admin object"
    example: "org.apache.activemq.command.ActiveMQQueue"
  - name: "${PREFIX}_ADMIN_OBJECT_${ADMIN_OBJECT_PREFIX}_PROPERTY_{property_name}"
    description: "These variables are used to add config-property entries to the administration object. The {property_name} defines the name of the property to add and the value will be the value configured on this environment variable."
    example: "For example, if your administration object with prefix 'ActiveMQQueue' of your resource adapter with prefix 'TEST_RA' accepts any config-property despite 'PhysicalName', e.g. 'propA' and you want to set it to 'valueA', then your environment variable will be TEST_RA_ADMIN_OBJECT_ActiveMQQueue_PROPERTY_propA=valueA"
  - name: "{PREFIX}_POOL_INITIAL_SIZE"
    description: "The initial-pool-size element indicates the initial number of connections a pool should hold. This default to 0."
    example: "1"
  - name: "{PREFIX}_POOL_FAIR"
    description: "Defines if pool use should be fair. Default is true"
    example: "false"
  - name: "{PREFIX}_POOL_USE_STRICT_MIN"
    description: "Defines if the min-pool-size should be considered strict. Default is false."
    example: "true"
  - name: "{PREFIX}_POOL_CAPACITY_INCREMENTER_CLASS"
    description: "Specifies the class name which defines the policy for incrementing connections in the pool."
    example: "org.jboss.jca.core.connectionmanager.pool.capacity.WatermarkIncrementer"
  - name: "{PREFIX}_POOL_CAPACITY_INCREMENTER_PROPERTY_{property_name}"
    description: "These variables are used to add config-property entries to the pool capacity incrementer. The {property_name} defines the name of the property to add and the value will be the value configured on this environment variable."
    example: "For example, if your capacity incrementer of your resource adapter with prefix 'TEST_RA' accepts a config-property named 'watermark' and you want to set it to '1', then your environment variable will be TEST_RA_POOL_CAPACITY_INCREMENTER_PROPERTY_watermark=1"
  - name: "{PREFIX}_POOL_CAPACITY_DECREMENTER_CLASS"
    description: "Specifies the class name which defines the policy for decrementing connections in the pool."
    example: "org.jboss.jca.core.connectionmanager.pool.capacity.SizeDecrementer"
  - name: "{PREFIX}_POOL_CAPACITY_DECREMENTER_PROPERTY_{property_name}"
    description: "These variables are used to add config-property entries to the pool capacity decrementer. The {property_name} defines the name of the property to add and the value will be the value configured on this environment variable."
    example: "For example, if your capacity decrementer of your resource adapter with prefix 'TEST_RA' accepts a config-property named 'size' and you want to set it to '2', then your environment variable will be TEST_RA_POOL_CAPACITY_DECREMENTER_PROPERTY_size=2"
