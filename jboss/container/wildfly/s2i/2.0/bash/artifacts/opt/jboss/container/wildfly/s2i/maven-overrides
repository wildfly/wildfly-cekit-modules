# Starting ubi10, the overrides is no more part of the shared openjdk modules.
# We need any custom settings.xml to be copied to ~/.m2/settings.xml, required 
# by JBoss Modules artifact lookup when the server is a slim installation.
# Overrides basic functionality by looking fore settings.xml in <source>/configuration
function maven_init_var_MAVEN_SETTINGS_XML() {
  if [ -f "${MAVEN_SETTINGS_XML}" ]; then
    :
  elif [ -f "${S2I_SOURCE_DIR}/configuration/settings.xml" ]; then
    MAVEN_SETTINGS_XML="${HOME}/.m2/settings.xml"
    mkdir -p $(dirname "${MAVEN_SETTINGS_XML}")
    cp "${S2I_SOURCE_DIR}/configuration/settings.xml" "${MAVEN_SETTINGS_XML}"
  elif [ -f "${HOME}/.m2/settings.xml" ]; then
    MAVEN_SETTINGS_XML="${HOME}/.m2/settings.xml"
  else
    MAVEN_SETTINGS_XML="${_MAVEN_S2I_SETTINGS_XML}"
    cp "${JBOSS_CONTAINER_MAVEN_DEFAULT_MODULE}/jboss-settings.xml" "${MAVEN_SETTINGS_XML}"
  fi
}